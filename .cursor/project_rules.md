# 宝宝故事应用项目规则

本文档汇总了宝宝故事应用项目的所有设计和开发规则，作为团队成员的参考指南。详细规则请参阅各规则配置文件。

## 设计语言规范

宝宝故事应用采用了iOS风格的设计语言，专为儿童和家长设计，确保界面友好、易用且吸引人。

### 核心设计原则

1. **以儿童为中心**：所有设计决策应优先考虑儿童用户体验
2. **简单易懂**：界面简洁明了，减少认知负担
3. **视觉吸引**：使用明亮、友好的色彩系统
4. **一致性**：保持整个应用的视觉和交互一致性
5. **可访问性**：设计应兼顾各类用户的需求

### 设计系统组成

- **颜色系统**：主色调（蓝色系）、中性色、语义色和背景色
- **排版**：iOS系统字体，明确的字体大小和权重层级
- **间距**：一致的间距系统，确保界面节奏感
- **圆角**：统一的圆角半径规范，增强友好感
- **阴影**：轻微的阴影效果，增强深度感
- **动画**：流畅的过渡动画，增强交互体验

### 组件库规范

- **按钮**：主按钮、次级按钮、图标按钮等
- **卡片**：故事卡片、信息卡片等
- **输入控件**：表单输入、选择器等
- **列表**：故事列表、设置列表等
- **反馈组件**：加载状态、错误状态、空状态等

详见 [design_system.json](rules/design_system.json)

## 代码规范

项目采用严格的代码规范，确保代码质量、可维护性和性能。

### Swift代码规范

- **架构模式**：MVVM + Coordinator
- **命名约定**：类使用PascalCase，变量/方法使用camelCase
- **代码组织**：使用MARK分隔代码段，按功能组织代码
- **内存管理**：避免循环引用，使用weak/unowned引用
- **错误处理**：定义明确的错误类型，使用throws传递错误
- **并发处理**：使用Swift并发系统（async/await）
- **依赖注入**：使用属性注入或构造函数注入
- **文档注释**：使用三斜线注释（///）标记公开API

### WebView开发规范

- **JavaScript桥接**：安全的消息传递机制
- **性能监控**：监控资源加载、内存使用和页面性能
- **错误处理**：捕获并处理所有JavaScript错误
- **进程管理**：优雅处理WebView进程终止
- **本地文件访问**：正确配置文件访问权限
- **安全措施**：验证所有从JavaScript接收的数据

### HTML和CSS规范

- **语义化HTML**：使用正确的语义标签
- **CSS组织**：使用BEM命名方法论
- **响应式设计**：移动优先的响应式设计
- **CSS变量**：使用变量定义颜色和主题
- **性能优化**：最小化DOM操作，优化选择器

### JavaScript规范

- **ES6+特性**：使用现代JavaScript特性
- **模块化**：使用模块化开发
- **异步处理**：使用Promise和async/await
- **错误处理**：捕获并报告所有错误
- **事件处理**：使用事件委托和防抖/节流优化

详见 [code_standards.json](rules/code_standards.json)

## 可访问性规范

项目严格遵循可访问性标准，确保所有用户都能无障碍使用。

### 视觉可访问性

- **颜色对比度**：符合WCAG 2.1 AA标准
- **文本大小**：支持动态类型，最小字体14px
- **暗黑模式**：支持系统深色模式
- **图像替代文本**：所有图像提供替代文本

### 交互可访问性

- **触控目标**：最小尺寸44×44pt
- **手势替代**：复杂手势提供替代方式
- **键盘导航**：支持完整的键盘操作
- **交互反馈**：明确的操作反馈

### 听觉可访问性

- **字幕**：视频内容提供字幕
- **声音替代**：声音反馈提供视觉替代

### 认知可访问性

- **简洁语言**：使用简单明了的语言
- **清晰导航**：导航结构简单明确
- **错误处理**：友好的错误提示和恢复机制
- **时间限制**：避免或可延长时间限制

### 儿童内容特定标准

- **多种阅读级别**：根据年龄提供不同难度
- **朗读功能**：提供故事朗读
- **清晰指示**：交互元素有明确指示

详见 [accessibility_guidelines.json](rules/accessibility_guidelines.json)

## 版本控制规范

- **分支策略**：采用GitFlow工作流
- **提交信息**：使用约定式提交格式
- **版本号**：采用语义化版本控制
- **变更日志**：维护详细的变更记录

## 代码审查流程

- **审查重点**：功能完整性、代码质量、性能、安全、测试覆盖
- **自动化检查**：使用SwiftLint等工具
- **持续集成**：确保代码可以构建和通过测试

---

本规则文档最后更新于：2023-03-11 